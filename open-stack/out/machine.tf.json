{
  "resource": {
    "openstack_compute_flavor_v2": {
      "lab_flavor_lab_machine_pfsense": {
        "name": "lab_flavor_lab_machine_pfsense",
        "disk": 20,
        "ram": 4096,
        "vcpus": 4
      }
    },
    "openstack_compute_instance_v2": {
      "lab_machine_pfsense": {
        "name": "lab_machine_pfsense",
        "block_device": [
          {
            "uuid": "${data.openstack_images_image_v2.pfsense.id}",
            "source_type": "image",
            "volume_size": 20,
            "boot_index": 0,
            "destination_type": "volume",
            "delete_on_termination": true
          }
        ],
        "flavor_id": "${openstack_compute_flavor_v2.lab_flavor_lab_machine_pfsense.id}",
        "security_groups": [
          "default"
        ],
        "network": [
          {
            "uuid": "${data.openstack_networking_network_v2.public_net.id}",
            "port": "${openstack_networking_port_v2.lab_port_ip172244200.id}"
          },
          {
            "uuid": "${openstack_networking_network_v2.lab_network_internal_network.id}",
            "port": "${openstack_networking_port_v2.lab_port_ip172202020.id}"
          }
        ]
      }
    },
    "openstack_networking_port_v2": {
      "lab_port_ip172244200": {
        "network_id": "${data.openstack_networking_network_v2.public_net.id}",
        "fixed_ip": {
          "subnet_id": "${data.openstack_networking_subnet_v2.public_subnet.id}",
          "ip_address": "172.24.4.200"
        }
      },
      "lab_port_ip172202020": {
        "network_id": "${openstack_networking_network_v2.lab_network_internal_network.id}",
        "fixed_ip": {
          "subnet_id": "${openstack_networking_subnet_v2.lab_subnet_internal_network.id}",
          "ip_address": "172.20.20.20"
        }
      }
    }
  }
}